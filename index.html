<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Because coffee brewers' recipe Calculator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap'); /* Use 400 and 700 weights */

        :root {
            /* Color Palette (White Bold Text Version) */
            --dark-gray-bg: #4d4d4d;     /* body 背景色 */
            --light-gray-bg: #717171;    /* container 背景色 */
            --text-color-light: #f5f5f5; /* 主要テキスト色 (ほぼ白) */
            --border-color-light: rgba(255, 255, 255, 0.25); /* 境界線 (半透明の白) */
            --input-bg: #606060;         /* 入力欄背景 (暗め) */
            --input-border: #888888;     /* 入力欄ボーダー */
            --input-focus-border: #bbbbbb; /* 入力欄フォーカスボーダー */
            --button-bg: #333333;         /* ボタン背景 */
            --button-text: #ffffff;       /* ボタンテキスト */
            --button-hover-bg: #222222;   /* ボタンホバー */
            /* エラー色はそのまま or 微調整 */
            --error-bg: #5c3e3e;
            --error-border: #7a5252;
            --error-text: #f5caca;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            line-height: 1.7;
            margin: 0;
            padding: 40px 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
            background-color: var(--dark-gray-bg);
            color: var(--text-color-light); /* デフォルト文字色を白系に */
            font-weight: 400; /* 基本の太さは通常 */
            /* text-shadow は削除 */
        }

        .container {
            max-width: 500px;
            width: 90%;
            padding: 35px;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background-color: var(--light-gray-bg);
            /* color は body から継承 */
        }

        h1 {
            text-align: center;
            color: var(--text-color-light);
            font-weight: 700; /* 太字 */
            font-size: 1.8em;
            margin-top: 0;
            margin-bottom: 35px;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border-color-light); /* 境界線の色変更 */
            padding-bottom: 20px;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        label {
            flex-shrink: 0;
            font-weight: 400; /* ラベルは通常の太さ */
            color: var(--text-color-light);
            opacity: 0.9;
        }

        input[type="number"] {
            flex-grow: 1;
            padding: 12px 15px;
            border: 1px solid var(--input-border);
            border-radius: 4px;
            background-color: var(--input-bg);
            font-size: 1em;
            box-sizing: border-box;
            text-align: right;
            max-width: 120px;
            color: var(--text-color-light); /* 文字色を白系に */
            font-weight: 700; /* 入力文字も太字に */
        }
         input[type="number"]:focus {
             outline: none;
             border-color: var(--input-focus-border); /* フォーカス時のボーダー色調整 */
             box-shadow: 0 0 0 2px rgba(245, 245, 245, 0.2); /* フォーカス時の影調整 */
         }
         input[type="number"]::placeholder {
             color: #cccccc;
             opacity: 0.6;
             font-weight: 400; /* Placeholder は通常の太さ */
         }

        button {
            padding: 12px 25px;
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 700; /* ボタン文字も太字に */
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: var(--button-hover-bg);
        }

        #result {
            margin-top: 30px;
            padding: 25px;
            border: 1px solid var(--border-color-light); /* 境界線色変更 */
            border-radius: 6px;
            background-color: rgba(0, 0, 0, 0.08);
        }

        #result h2 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700; /* 太字 */
            color: var(--text-color-light);
            text-align: left;
            border-bottom: 1px solid var(--border-color-light); /* 境界線色変更 */
            padding-bottom: 15px;
        }

        #result p {
            margin: 12px 0;
            font-size: 1em;
            color: var(--text-color-light);
            font-weight: 700; /* レシピ概要も太字 */
        }
        /* strong タグはデフォルトで太字だが、明示的に font-weight: 700; を指定してもよい */
        #result strong {
            font-weight: 700; /* 強調部分は確実に太字 */
            display: inline-block;
            min-width: 95px;
            /* color は継承 */
            opacity: 0.95;
        }

         .step {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border-color-light); /* 境界線色変更 */
            font-size: 1em;
         }
         .step:last-child {
             border-bottom: none;
             margin-bottom: 0;
             padding-bottom: 0;
         }
         /* ステップ詳細の <p> タグ全体を太字にする */
         .step p {
             font-weight: 700; /* ステップ説明も太字 */
             margin: 0; /* 必要なら調整 */
         }
         /* ステップ内の strong タグ（時間部分）はさらに太くする必要はない */
         .step p strong {
             font-weight: 700; /* 親から継承または明示 */
             min-width: 110px;
             display: inline-block; /* 縦揃えのため */
             margin-right: 5px; /* 時間と内容の間に少しスペース */
         }

         .recipe-details {
             margin-top: 25px;
             padding-top: 15px;
             border-top: 1px solid var(--border-color-light); /* 境界線色変更 */
         }
          .recipe-details h3 {
              margin-top: 0;
              margin-bottom: 15px;
              font-size: 1.1em;
              font-weight: 700; /* 太字 */
              color: var(--text-color-light);
          }

        .error {
            color: var(--error-text);
            font-weight: 700; /* エラーメッセージも太字 */
            text-align: center;
            padding: 10px;
            background-color: var(--error-bg);
            border: 1px solid var(--error-border);
            border-radius: 4px;
            margin-top: 10px;
            /* text-shadow は削除 */
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Because coffee brewers' recipe</h1>

        <div class="input-group">
            <label for="coffeeWeight">Coffee (g):</label>
            <input type="number" id="coffeeWeight" name="coffeeWeight" value="15" min="1" step="0.1" placeholder="e.g. 15">
            <button onclick="calculateRecipe()">Calculate</button>
        </div>

        <div id="result">
            <!-- 結果はJSで挿入される -->
        </div>
    </div>

    <script>
        // --- Base Recipe ---
        const baseCoffeeGrams = 15;
        const baseTotalWaterMl = 250;
        const basePour1Ml = 60;
        const basePour2Ml = 130;
        const basePour3Ml = 60;
        const waterTemperature = 88;

        // --- Ratios ---
        const ratioPour1 = basePour1Ml / baseCoffeeGrams;
        const ratioPour2 = basePour2Ml / baseCoffeeGrams;
        const ratioPour3 = basePour3Ml / baseCoffeeGrams;

        function calculateRecipe() {
            const inputWeightElement = document.getElementById('coffeeWeight');
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';

            const coffeeWeight = parseFloat(inputWeightElement.value);

            if (isNaN(coffeeWeight) || coffeeWeight <= 0) {
                resultDiv.innerHTML = `<h2>Recipe</h2><p class="error">Please enter a valid coffee weight.</p>`;
                return;
            }

            const calculatedPour1 = Math.round(coffeeWeight * ratioPour1);
            const calculatedPour2 = Math.round(coffeeWeight * ratioPour2);
            const calculatedPour3 = Math.round(coffeeWeight * ratioPour3);
            const calculatedTotalWater = calculatedPour1 + calculatedPour2 + calculatedPour3;

            const cumulative1 = calculatedPour1;
            const cumulative2 = cumulative1 + calculatedPour2;

            let resultHTML = `<h2>Recipe (${coffeeWeight}g)</h2>`;
            // レシピ概要部分 (p タグ自体に太字スタイルが適用される)
            resultHTML += `<p><strong>Coffee:</strong> ${coffeeWeight}g</p>`;
            resultHTML += `<p><strong>Water Temp:</strong> ${waterTemperature}°C</p>`;
            resultHTML += `<p><strong>Total Water:</strong> ${calculatedTotalWater}ml</p>`;

            resultHTML += `<div class="recipe-details">`;
            resultHTML += `<h3>Brew Steps</h3>`;

            // ステップ部分 (p タグ自体に太字スタイルが適用される)
            resultHTML += `<div class="step">`;
            resultHTML += `<p><strong>0'00" - 0'10":</strong> Pour ${calculatedPour1}ml</p>`;
            resultHTML += `</div>`;

            resultHTML += `<div class="step">`;
            resultHTML += `<p><strong>0'30" - 1'00":</strong> (Total ${cumulative2}ml)</p>`;
            resultHTML += `</div>`;

            resultHTML += `<div class="step">`;
            resultHTML += `<p><strong>1'20" - 1'30":</strong> (Total ${calculatedTotalWater}ml)</p>`;
            resultHTML += `</div>`;

            resultHTML += `</div>`;

            resultDiv.innerHTML = resultHTML;
        }

        window.onload = function() {
             const initialWeight = document.getElementById('coffeeWeight').value;
             if (initialWeight && !isNaN(initialWeight) && parseFloat(initialWeight) > 0) {
                  calculateRecipe();
              } else {
                  document.getElementById('result').innerHTML = '<h2>Recipe</h2><p>Enter coffee weight and click Calculate.</p>';
              }
         };
    </script>

</body>
</html>